Tny("http").provider("$$httpErrorHandler",function(){function e(t){console.log(t.status)}return{set:function(t){e=t||Tny.noop},get:function(){return e}}}),Tny("http").provider("$$httpHeaders",function(){var r={};return{setHeader:function(t,e){r[t]=e},getHeaders:function(){return r}}}),Tny("http").run(["$httpJsonInterceptor",function(t){t()}]),Tny("http").provider("$$httpInterceptors",function(){var n={};return{getInterceptors:function(){return n},addInterceptor:function(t,e){var r=e;if(!r.pre&&!r.post)throw'HTTP interceptors must have at least one "pre" or "post" function';n[t]=e},removeInterceptor:function(t){delete n[t]}}}),Tny("http").factory("$httpJsonInterceptor",["$$httpInterceptors",function(t){function e(t,e){"JSON"===t.dataType.toUpperCase()&&"GET"!==t.method&&(e.setRequestHeader("Content-type","application/json;charset=utf-8"),t.data=JSON.stringify(t.data))}function r(t,e,r){var n;if("JSON"===e.dataType.toUpperCase())try{n=JSON.parse(t)}catch(t){}return n||t}return function(){t.addInterceptor("jsonDataTypeFormatter",{pre:e,post:r})}}]),Tny("http").service("$http",["$$httpHeaders","$$httpInterceptors","$$httpErrorHandler",function(c,s,u){function d(t,e){if(e)for(key in e)e.hasOwnProperty(key)&&t.setRequestHeader(key,e[key])}function i(a,p){p.onreadystatechange=function(){if(4==p.readyState)if(200<=p.status&&p.status<207){var t,e=a,r=p,n=s.getInterceptors(),o=r.responseText;for(t in n)o=n[t].post(o,e,r)||o;e.callback(o,r)}else!1!==a.error(p)&&u.get()(p)}}this.send=function(t){var e={},r={callback:Tny.noop,error:Tny.noop,method:"GET",data:"",async:!0,dataType:"JSON",headers:{}};if(e.callback=t.callback||r.callback,e.error=t.error||r.error,e.method=t.method||r.method,e.data=t.data||r.data,e.async=t.async||r.async,e.dataType=t.dataType||r.dataType,e.headers=t.headers||r.headers,e.url=t.url,!e.url)throw"HTTP requires URL";"GET"==e.method&&(e.url=function(t,e){if(!e)return t;var r,n=[];for(r in e)n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t+(n.length?"?"+n.join("&"):"")}(e.url,e.data));var n,r=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var t,e=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],r=0;r<e.length;r++)try{t=new ActiveXObject(e[r]);break}catch(t){}return t}(),o=(r.open(e.method,e.url,e.async),e),a=r,p=s.getInterceptors();for(n in p)p[n].pre(o,a);d(c.getHeaders()),d(e.headers),i(e,r),r.send(e.data)}}]);